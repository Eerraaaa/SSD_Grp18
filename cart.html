<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Shopping Cart - ElectraEdge</title>
    <link rel="stylesheet" href="website.css" />
</head>

<body>
    <!-- Header -->
    <div id="header-placeholder"></div>

    <script>
        fetch('header.html')
            .then(res => res.text())
            .then(data => {
                document.getElementById('header-placeholder').innerHTML = data;
            });
    </script>

    <section class="container" style="margin-top: 2rem;">
        <table class="cart-table" style="width: 100%; border-collapse: collapse;">
            <thead>
                <tr>
                    <th style="padding: 0.5rem; text-align: left;">Product</th>
                    <th>Qty</th>
                    <th>Price</th>
                    <th>Edit</th>
                </tr>
            </thead>
            <tbody id="cartItems">
                <!-- Items inserted here by JS -->
            </tbody>
        </table>
        <h3 id="totalPrice" style="margin-top: 1rem;">Total: $0.00</h3>
        <button class="btn btn-primary">Checkout</button>
    </section>

    <!-- Footer -->
    <div id="footer-placeholder"></div>

    <script>
        fetch("footer.html")
            .then(res => res.text())
            .then(data => {
                document.getElementById("footer-placeholder").innerHTML = data;
            });
    </script>

    <script>
        // Dummy cart logic with localStorage or static array
        const cart = [
            { name: "ElectraPhone Pro Max", qty: 1, price: 1299 },
            { name: "BoomBox Smart Speaker", qty: 2, price: 249 }
        ];

        function renderCart() {
            const tbody = document.getElementById("cartItems");
            let total = 0;

            tbody.innerHTML = cart.map((item, i) => {
                const subtotal = item.qty * item.price;
                total += subtotal;
                return `
      <tr>
        <td>${item.name}</td>
        <td>
          <input type="number" min="1" value="${item.qty}" onchange="updateQty(${i}, this.value)" style="width: 60px; padding: 4px;" />
        </td>
        <td>$${subtotal.toFixed(2)}</td>
        <td style="text-align: center;">
          <button onclick="removeItem(${i})" style="color: red; font-size: 1.2rem; border: none; background: transparent;">&times;</button>
        </td>
      </tr>`;
            }).join("");

            document.getElementById("totalPrice").textContent = `Total: $${total.toFixed(2)}`;
        }

        // Function to update quantity
        function updateQty(index, value) {
            const qty = parseInt(value);
            if (!isNaN(qty) && qty > 0) {
                cart[index].qty = qty;
                renderCart();
            }
        }

        // Function to remove item from cart
        function removeItem(index) {
            cart.splice(index, 1);
            renderCart();
        }

        renderCart();
    </script>
</body>

</html>