<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Product Catalog - ElectraEdge</title>
    <link rel="stylesheet" href="website.css" />
</head>

<body>
    <!-- Header -->
    <div id="header-placeholder"></div>

    <script>
        fetch('header.html')
            .then(res => res.text())
            .then(data => {
                document.getElementById('header-placeholder').innerHTML = data;
            });
    </script>


    <section class="container" style="padding: 4rem 0;">
        <h2 style="text-align: center; margin-bottom: 2rem;">All Products</h2>

        <div style="display: flex; flex-wrap: wrap; gap: 1rem; justify-content: center; margin-bottom: 2rem;">
            <input type="text" id="searchInput" placeholder="Search products..."
                style="padding: 0.75rem 1rem; font-size: 1rem; width: 250px; border: 1px solid #ccc; border-radius: 8px;" />
            <select id="sortSelect"
                style="padding: 0.75rem 1rem; font-size: 1rem; border: 1px solid #ccc; border-radius: 8px;">
                <option value="">Sort by</option>
                <option value="asc">Price: Low to High</option>
                <option value="desc">Price: High to Low</option>
            </select>
        </div>

        <div class="product-grid" id="productCatalog"></div>
    </section>


    <!-- Footer -->
    <div id="footer-placeholder"></div>

    <script>
        fetch("footer.html")
            .then(res => res.text())
            .then(data => {
                document.getElementById("footer-placeholder").innerHTML = data;
            });
    </script>

    <script>
        const products = [];

        // Dummy data generation
        for (let i = 1; i <= 20; i++) {
            products.push({
                id: i,
                name: `Product ${i}`,
                price: Math.floor(Math.random() * 500) + 100,
                image_url: "https://via.placeholder.com/200x150?text=Product+" + i,
            });
        }

        const container = document.getElementById("productCatalog");
        const searchInput = document.getElementById("searchInput");
        const sortSelect = document.getElementById("sortSelect");

        function renderCatalog(items) {
            container.innerHTML = items.map(p => `
      <div class="product-card">
        <img src="${p.image_url}" alt="${p.name}" style="max-width:100%;">
        <h3>${p.name}</h3>
        <p>$${p.price}</p>
        <a href="product_detail.html?id=${p.id}" class="btn btn-primary w-100">View Details</a>
      </div>
    `).join("");
        }

        function applyFilters() {
            let filtered = [...products];
            const search = searchInput.value.toLowerCase();
            const sort = sortSelect.value;

            if (search) {
                filtered = filtered.filter(p => p.name.toLowerCase().includes(search));
            }

            if (sort === "asc") {
                filtered.sort((a, b) => a.price - b.price);
            } else if (sort === "desc") {
                filtered.sort((a, b) => b.price - a.price);
            }

            renderCatalog(filtered);
        }

        searchInput.addEventListener("input", applyFilters);
        sortSelect.addEventListener("change", applyFilters);

        // Initial render
        renderCatalog(products);
    </script>

</body>

</html>